--- certify.ps1
+++ certify.ps1
@@
-    if ($ForceLicense) {
+    if ($ForceLicense) {
@@
-        if ($ticketValid) {
-            Write-Host "Using existing valid ticket" -ForegroundColor Green
-        } else {
+        if ($ticketValid) {
+            Write-Host "Using existing valid ticket" -ForegroundColor Green
+        } else {
             $seatId = Get-VacantSeat
             $fullTicket = New-Ticket -SeatId $seatId
@@
-            if (-not $keyFromConfig) {
-                Save-Config
-            }
+            # Persist LICENSE_KEY regardless of source
+            Save-Config
         }
     }
 
-    Write-Host "Certification complete." -ForegroundColor Green
+    # Final safety: if we have a LICENSE_KEY in memory, make sure itâ€™s persisted to test.env
+    if ($LICENSE_KEY) { Save-Config }
+    Write-Host "Certification complete." -ForegroundColor Green

