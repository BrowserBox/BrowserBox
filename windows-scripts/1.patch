--- start.ps1
+++ start.ps1
@@
-$Config = @{}
-if (Test-Path $TestEnvFile) {
-    Get-Content $TestEnvFile | ForEach-Object {
-        if ($_ -match "^([^=]+)=(.*)$") {
-            $Config[$Matches[1]] = $Matches[2]
-        }
-    }
-}
-
-# Check for required license key (env var takes precedence over config)
-if (-not $env:LICENSE_KEY -and -not $Config["LICENSE_KEY"]) {
-    Write-Error "No LICENSE_KEY provided. Purchase a license key at: http://getbrowserbox.com or email sales@dosaygo.com for help. Then run 'bbx certify -LicenseKey <LicenseKey>' to install."
-    throw "LICENSE Error"
-}
-
-$LICENSE_KEY = if ($env:LICENSE_KEY) { $env:LICENSE_KEY } else { $Config["LICENSE_KEY"] }
+function Get-TestEnvConfig {
+    $cfg = @{}
+    if (Test-Path $TestEnvFile) {
+        Get-Content $TestEnvFile | ForEach-Object {
+            if ($_ -match "^([^=]+)=(.*)$") {
+                $cfg[$Matches[1]] = $Matches[2]
+            }
+        }
+    }
+    return $cfg
+}
+
+$Config = Get-TestEnvConfig
+
+# If missing, run certify to obtain/persist the key, then re-read config and re-check.
+if (-not $env:LICENSE_KEY -and -not $Config["LICENSE_KEY"]) {
+    Write-Host "LICENSE_KEY not found in environment or config; invoking bbx certify..." -ForegroundColor Yellow
+    & $certifyScriptPath
+    $Config = Get-TestEnvConfig
+}
+
+if (-not $env:LICENSE_KEY -and -not $Config["LICENSE_KEY"]) {
+    Write-Error "No LICENSE_KEY available after certification. Please acquire a license at http://getbrowserbox.com or contact sales@dosaygo.com."
+    throw "LICENSE Error"
+}
+
+$LICENSE_KEY = if ($env:LICENSE_KEY) { $env:LICENSE_KEY } else { $Config["LICENSE_KEY"] }
@@
-# Run certify to check license
-& $certifyScriptPath
+# (certify already ran if needed above)

